{% extends 'base.html' %}
{% load static %}

{% block title %}Responses{% endblock title %}
{% block content %}
<h3 class="large-text text-color-primary">Фильтр откликов на мои объявления:</h3>
<form method="GET" class="large-text text-color-primary">
    {{ form.as_p }}
    <input class="btn btn-secondary large-text" type="submit" value="Показать">
</form>
{% if title %}
<h3 class="large-text text-color-primary">Отклики на мое объявление: {{ title }}</h3>
{% else %}
<h3 class="large-text text-color-primary">Отклики на все мои объявления:</h3>
{% endif %}

{% if filter_responses %}
{% for response in filter_responses %}
<div class="large-text text-color-primary">
    <b>Объявление:</b>
    <a href="{% url 'detail_post' response.post.id %}" class="response-link">{{ response.post.title }}</a>
    <b>Отклик:</b> {{ response.text }}
    <b>Автор:</b> {{ response.user.username }}
    <b>Дата:</b> {{ response.created_ad|date:'d.M.Y' }}
    {% if response.status == 'pending' %}
    <a href="{% url 'accept_response' response.id %}" class="response-link">принять</a>
    <a href="{% url 'delete_response' response.id %}" class="response-link-delete">удалить</a>
    {% else %}
    <span class="response-status-text">отклик принят</span>
    {% endif %}
</div>
{% endfor %}
{% else %}
<h5 class="large-text text-color-primary">Откликов нет!</h5>
{% endif %}

<h3 class="large-text text-color-primary">Мои отклики на объявления:</h3>
{% if myresponses %}
{% for response in myresponses %}
<div class="large-text text-color-primary">
    <b>Объявление:</b>
    <a href="{% url 'detail_post' response.post.id %}" class="response-link">{{ response.post.title }}</a>
    <b>Мой отклик:</b> {{ response.text }}
    <b>Дата:</b> {{ response.created_ad|date:'d.M.Y' }}
    {% if response.status == 'accepted' %}
        <span class="response-status-text">Автор объявления принял отклик!</span>
    {% else %}
        <span class="response-status-pending">Автор объявления пока не принял отклик!</span>
    {% endif %}
</div>
{% endfor %}
{% else %}
<h5 class="large-text text-color-primary">Откликов нет!</h5>
{% endif %}
{% endblock content %}

